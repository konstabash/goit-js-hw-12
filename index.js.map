{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";   \n\n        \nlet queryTracker = '';\nconst loadingIcon = document.querySelector('#loading');\n\nexport async function getImages(userInput, page) {\n    try {\n        loadingIcon.classList.add('loader');\n        const params = {\n            key: '48946065-1d1345988ab2399d45be7b206',\n            q: userInput,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: 40,\n};        \n        const output = await axios.get('https://pixabay.com/api/', { params });\n        if (output.data.hits.length === 0) {\n            iziToast.error({\n                title: '',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n                maxWidth: '432px',\n                theme: 'dark',\n                messageSize: '16',\n                backgroundColor: '#ef4040',\n                messageColor: '#fafafb',\n                iconColor: '#fafafb',\n            });\n        };\n\n        loadingIcon.classList.remove('loader');\n        return output.data;\n\n    }\n  catch (err) {\n        \n        iziToast.error({\n            title: 'Unexpected Error',\n            message: `${err}`,\n            position: 'topRight',\n            maxWidth: '432px',\n            theme: 'dark',\n            messageSize: '16',\n            backgroundColor: '#ef4040',\n            messageColor: '#fafafb',\n            iconColor: '#fafafb',\n        });\n        loadingIcon.classList.remove('loader');\n    }\n    \n};","export function imageTemplate(image) {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n    return `\n        <a class=\"gallery-item\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" data-source=\"${largeImageURL}\" />\n            <div class=\"image-features\">\n                <div class=\"features-text-field\">\n                    <p class=\"image-feature-text\">Likes</p>\n                    <p class=\"image-feature-text\">${likes}</p>\n                </div>\n                <div class=\"features-text-field\">\n                    <p class=\"image-feature-text\">Views</p>\n                    <p class=\"image-feature-text\">${views}</p>\n                </div>\n                <div class=\"features-text-field\">\n                    <p class=\"image-feature-text\">Comments</p>\n                    <p class=\"image-feature-text\">${comments}</p>\n                </div>\n                <div class=\"features-text-field\">\n                    <p class=\"image-feature-text\">Downloads</p>\n                    <p class=\"image-feature-text\">${downloads}</p>\n                </div>\n            </div>\n        </a>\n    `;\n}\n\nexport function imagesTemplate(images) {\n    return images.map(imageTemplate).join('');\n};","import iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport {getImages} from './js/pixabay-api';\nimport { imagesTemplate } from './js/render-functions';\n\nconst refs = {\n    form: document.querySelector(\".search-form\"),\n    formInput: document.querySelector('.input-field'),\n    gallery: document.querySelector('.gallery'),\n    loadButton: document.querySelector('.load-btn'),\n}\nconst { form, formInput, gallery, loadButton } = refs;\n\nconst params = {\n    query: '',\n    page: 1,\n    total: 100,\n    perPage: 40,\n    maxPage: 10,\n};\n\nlet lightbox = new SimpleLightbox('.gallery a');\n\nform.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    if (formInput.value.trim() === '') {\n        formInput.value = '';\n        return;\n    };\n    document.querySelector('.gallery').innerHTML = '';\n    params.page = 1;\n    params.query = formInput.value.trim();\n    const images = await getImages(params.query, params.page);\n    params.total = images.totalHits;\n    params.maxPage = Math.ceil(params.total / params.perPage);\n    const markup = imagesTemplate(images.hits);\n    gallery.innerHTML = markup;\n    formInput.value = '';\n    lightbox.refresh();\n    checkLoadStatus();\n});\n\nloadButton.addEventListener('click', async (e) => {\n    loadMore();\n});\n\ngallery.addEventListener('click', e => {\n    e.preventDefault();\n        if (e.target === gallery) return;\n\n    lightbox.open(e.target);\n\n});\n\nasync function loadMore() {\n    params.page += 1\n    const result = await getImages(params.query, params.page);\n    const markup = imagesTemplate(result.hits);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    scrollPage();\n    lightbox.refresh();\n    checkLoadStatus();\n}\n\nfunction checkLoadStatus() {\n    if (params.page >= params.maxPage) {\n        loadButton.classList.add('visually-hidden');\n        iziToast.info({\n    title: '',\n    message: `We're sorry, but you've reached the end of search results.`,\n    position: 'topRight',\n    maxWidth: '432px',\n    messageSize: '16',\n        });\n    } else {\n        loadButton.classList.remove('visually-hidden');\n    }\n}\n\nfunction scrollPage() {\n    const info = gallery.firstElementChild.getBoundingClientRect();\n    const height = info.height;\n    scrollBy({\n        top: height*2,\n        behavior: 'smooth',\n    });\n}"],"names":["loadingIcon","getImages","userInput","page","params","output","axios","iziToast","err","imageTemplate","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","refs","form","formInput","gallery","loadButton","lightbox","SimpleLightbox","e","markup","checkLoadStatus","loadMore","result","scrollPage","height"],"mappings":"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"}